name: Basic Workflow Example

jobs:
  setup:
    name: Setup Environment
    runs-on: ubuntu-latest
    outputs:
      build_id: ${{ steps.generate.outputs.build_id }}
      environment: ${{ steps.generate.outputs.environment }}
    steps:
      - name: Initialize workspace
        run: |
          echo "âœ… Setting up workspace..."
          echo "ğŸ“ Workspace initialized"

      - name: Generate build info
        id: generate
        run: |
          BUILD_ID="build-12345"
          ENVIRONMENT="development"
          echo "build_id=$BUILD_ID" >> "$GITHUB_OUTPUT"
          echo "environment=$ENVIRONMENT" >> "$GITHUB_OUTPUT"
          echo "âœ… Generated Build ID: $BUILD_ID"
          echo "ğŸŒ± Environment: $ENVIRONMENT"

      - name: Set global environment
        run: |
          echo "GLOBAL_CONFIG=enabled" >> "$GITHUB_ENV"
          echo "BUILD_TIMESTAMP=2026-02-25T10:00:00Z" >> "$GITHUB_ENV"
          echo "ğŸ”§ Global configuration set"

  build:
    name: Build Application
    runs-on: ubuntu-latest
    needs: setup
    steps:
      - name: Start build process
        run: |
          echo "âœ… Starting build with ID: ${{ needs.setup.outputs.build_id }}"
          echo "ğŸŒ± Environment: ${{ needs.setup.outputs.environment }}"
          echo "ğŸ”§ Global config: ${GLOBAL_CONFIG:-not_set}"

      - name: Compile code
        run: |
          echo "ğŸ—ï¸ Compiling application..."
          echo "âœ… Compilation completed successfully"

      - name: Run basic tests
        run: |
          echo "ğŸ§ª Running unit tests..."
          echo "âœ… All tests passed"

  package:
    name: Package Application
    runs-on: ubuntu-latest
    needs: [setup, build]
    steps:
      - name: Create package
        run: |
          echo "ğŸ“¦ Creating package for build: ${{ needs.setup.outputs.build_id }}"
          echo "âœ… Package created successfully"

      - name: Generate artifacts
        run: |
          echo "ğŸ“„ Generating deployment artifacts..."
          echo "âœ… Artifacts ready for deployment"

  notify:
    name: Send Notifications
    runs-on: ubuntu-latest
    needs: [setup, build, package]
    if: always()
    steps:
      - name: Success notification
        run: |
          echo "ğŸ‰ SUCCESS: Build ${{ needs.setup.outputs.build_id }} completed successfully"
          echo "ğŸŒ± Environment: ${{ needs.setup.outputs.environment }}"

      - name: Failure notification
        run: |
          echo "â„¹ï¸ INFO: Checking build status..."
          echo "ğŸ†” Build ID: ${{ needs.setup.outputs.build_id }}"

      - name: Completion summary
        run: |
          echo "ğŸ“Š === Build Summary ==="
          echo "ğŸ†” Build ID: ${{ needs.setup.outputs.build_id }}"
          echo "ğŸŒ± Environment: ${{ needs.setup.outputs.environment }}"
          echo "âœ… Build Status: completed"
          echo "ğŸ“¦ Package Status: completed"
          echo "â° Timestamp: ${BUILD_TIMESTAMP:-unknown}"